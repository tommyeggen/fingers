webpackHotUpdate(0,{15:function(e,t,r){"use strict";r.r(t);var n=r(3),i=Intl.DateTimeFormat,s=function(){function e(e){this.container=e,this.scores=this.getSavedScores(),this.template=document.querySelector('[data-id="tpl-scores"]').innerHTML}return e.prototype.saveScore=function(e){var t;(t=(t=this.getSavedScores()?this.getSavedScores():[]).sort((function(e,t){return e.actualTime>t.actualTime}))).length>3?t[t.length-1]=e:t.push(e),localStorage.setItem("scores",JSON.stringify(t)),this.scores=t},e.prototype.getSavedScores=function(){return JSON.parse(localStorage.getItem("scores"))},e.prototype.render=function(){var e=this.scores;e&&e.length>=1&&e.sort((function(e,t){return e.actualTime>t.actualTime}));var t={scores:e,highScore:e[0]||{}};this.container.innerHTML=n.render(this.template,t),this.setup()},e.prototype.setup=function(){var e=this;this.container.querySelector("#clear-scores").addEventListener("click",(function(){e.clear()}))},e.prototype.clear=function(){this.scores=[],localStorage.clear(),this.render()},e.createScore=function(e){var t=new Date,r=new i;return{timestamp:Date.now(),date:r.format(t),score:(e/1e3).toFixed(3),actualTime:e}},e}(),o=function(){function e(){this.alphabet=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],this.init(),this.endTemplate=document.querySelector('[data-id="tpl-end-screen"]').innerHTML}return e.prototype.init=function(){var e=this,t=document.querySelector("#current-letter");this.scores=new s(document.querySelector("#scores")),this.scores.render(),this.timer=document.querySelector("#timer"),this.letter=t,this.timer.click(),document.addEventListener("keydown",(function(t){" "===t.key.toUpperCase()&&(e.timer.parentElement.classList.add("--is-visible"),e.removeEndScreen(),e.reset())})),this.start()},e.prototype.reset=function(){clearInterval(this.intervalId),this.letter.parentElement.classList.remove("--is-wrong"),this.index=0,this.letter.innerText=this.alphabet[this.index],this.timer.innerText="0.00"},e.prototype.start=function(){var e=this;document.addEventListener("keydown",(function(t){var r=t.key.toUpperCase();"A"===r&&0===e.index?(e.startTimer(),e.advance()):r===e.alphabet[e.index]?e.advance():e.index>0&&e.fail()}))},e.prototype.advance=function(){this.letter.parentElement.classList.remove("--is-wrong"),this.index++,this.alphabet[this.index]?this.letter.innerText=this.alphabet[this.index]:this.finish()},e.prototype.fail=function(){this.letter.parentElement.classList.add("--is-wrong")},e.prototype.startTimer=function(){var e=this;this.startTime=Date.now();var t=0;this.intervalId=setInterval((function(){t+=10,e.timer.innerText=String((t/1e3).toFixed(3))}),10)},e.prototype.finish=function(){clearInterval(this.intervalId);var e=Date.now()-this.startTime,t=s.createScore(e);this.scores.saveScore(t),this.reset(),this.scores.render(),this.displayEndScreen(t)},e.prototype.displayEndScreen=function(e){var t=document.createElement("div");t.classList.add("dialog"),t.innerHTML=n.render(this.endTemplate,{time:e.score}),document.body.appendChild(t)},e.prototype.removeEndScreen=function(){var e=document.querySelector(".dialog");e&&e.parentElement.removeChild(e)},e}();r(5);document.addEventListener("DOMContentLoaded",(function(){new o}))}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvU2NvcmVzLnRzIiwid2VicGFjazovLy8uL3NyYy9GcmllbmRseUZpbmdlcnMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbIkRhdGVUaW1lRm9ybWF0IiwiSW50bCIsImNvbnRhaW5lciIsInRoaXMiLCJzY29yZXMiLCJnZXRTYXZlZFNjb3JlcyIsInRlbXBsYXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaW5uZXJIVE1MIiwic2F2ZVNjb3JlIiwic2NvcmUiLCJzb3J0IiwiYSIsImIiLCJhY3R1YWxUaW1lIiwibGVuZ3RoIiwicHVzaCIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwicGFyc2UiLCJnZXRJdGVtIiwicmVuZGVyIiwiY29udGV4dCIsImhpZ2hTY29yZSIsInNldHVwIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsZWFyIiwiY3JlYXRlU2NvcmUiLCJ0aW1lIiwiZGF0ZSIsIkRhdGUiLCJkdGYiLCJ0aW1lc3RhbXAiLCJub3ciLCJmb3JtYXQiLCJ0b0ZpeGVkIiwiYWxwaGFiZXQiLCJpbml0IiwiZW5kVGVtcGxhdGUiLCJlbEN1cnJlbnQiLCJ0aW1lciIsImxldHRlciIsImNsaWNrIiwiZXYiLCJrZXkiLCJ0b1VwcGVyQ2FzZSIsInBhcmVudEVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmVFbmRTY3JlZW4iLCJyZXNldCIsInN0YXJ0IiwiY2xlYXJJbnRlcnZhbCIsImludGVydmFsSWQiLCJyZW1vdmUiLCJpbmRleCIsImlubmVyVGV4dCIsInN0YXJ0VGltZXIiLCJhZHZhbmNlIiwiZmFpbCIsImZpbmlzaCIsInN0YXJ0VGltZSIsInNldEludGVydmFsIiwiU3RyaW5nIiwiZGlzcGxheUVuZFNjcmVlbiIsImRpYWxvZyIsImNyZWF0ZUVsZW1lbnQiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJyZW1vdmVDaGlsZCJdLCJtYXBwaW5n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QUFTcUIsaUJBQWlCLG9CQUFvQixXQUMvQixJQUFJIiwiZmlsZSI6IjcwZTY0ODItMC13cHMtaG1yLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgTXVzdGFjaGUgZnJvbSBcIm11c3RhY2hlXCI7XHJcbmltcG9ydCBEYXRlVGltZUZvcm1hdCA9IEludGwuRGF0ZVRpbWVGb3JtYXQ7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTY29yZXMge1xyXG5cclxuICAgIHByaXZhdGUgc2NvcmVzOiBTY29yZVtdO1xyXG5cclxuICAgIHByaXZhdGUgY29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgdGVtcGxhdGU6IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgdGhpcy5zY29yZXMgPSB0aGlzLmdldFNhdmVkU2NvcmVzKCk7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWlkPVwidHBsLXNjb3Jlc1wiXScpLmlubmVySFRNTDtcclxuICAgIH1cclxuXHJcbiAgICBzYXZlU2NvcmUoc2NvcmU6IFNjb3JlKSB7XHJcbiAgICAgICAgbGV0IHNjb3JlczogYW55O1xyXG4gICAgICAgIGlmICh0aGlzLmdldFNhdmVkU2NvcmVzKCkpIHtcclxuICAgICAgICAgICAgc2NvcmVzID0gdGhpcy5nZXRTYXZlZFNjb3JlcygpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNjb3JlcyA9IFtdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2NvcmVzID0gc2NvcmVzLnNvcnQoKGE6YW55LCBiOmFueSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gYS5hY3R1YWxUaW1lID4gYi5hY3R1YWxUaW1lXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmKHNjb3Jlcy5sZW5ndGggPiAzKSB7XHJcbiAgICAgICAgICAgIHNjb3Jlc1tzY29yZXMubGVuZ3RoIC0gMV0gPSBzY29yZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzY29yZXMucHVzaChzY29yZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnc2NvcmVzJywgSlNPTi5zdHJpbmdpZnkoc2NvcmVzKSk7XHJcbiAgICAgICAgdGhpcy5zY29yZXMgPSBzY29yZXM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U2F2ZWRTY29yZXMoKTogU2NvcmVbXSB7XHJcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Njb3JlcycpKTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHNjb3JlczogYW55ID0gdGhpcy5zY29yZXM7XHJcblxyXG4gICAgICAgIGlmKHNjb3JlcyAmJiBzY29yZXMubGVuZ3RoID49IDEpIHtcclxuICAgICAgICAgICAgc2NvcmVzLnNvcnQoKGE6IGFueSwgYjogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYS5hY3R1YWxUaW1lID4gYi5hY3R1YWxUaW1lO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG5cclxuXHJcbiAgICAgICAgY29uc3QgY29udGV4dCA9IHtcclxuICAgICAgICAgICAgc2NvcmVzOiBzY29yZXMsXHJcbiAgICAgICAgICAgIGhpZ2hTY29yZTogc2NvcmVzWzBdIHx8IHt9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5pbm5lckhUTUwgPSBNdXN0YWNoZS5yZW5kZXIodGhpcy50ZW1wbGF0ZSwgY29udGV4dCk7XHJcbiAgICAgICAgdGhpcy5zZXR1cCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldHVwKCkge1xyXG4gICAgICAgIGNvbnN0IGNsZWFyQnRuID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignI2NsZWFyLXNjb3JlcycpO1xyXG4gICAgICAgIGNsZWFyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFyKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXIoKSB7XHJcbiAgICAgICAgdGhpcy5zY29yZXMgPSBbXTtcclxuICAgICAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcclxuICAgICAgICB0aGlzLnJlbmRlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBjcmVhdGVTY29yZSh0aW1lOiBhbnkpOiBTY29yZSB7XHJcbiAgICAgICAgY29uc3QgZGF0ZTogRGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgY29uc3QgZHRmID0gbmV3IERhdGVUaW1lRm9ybWF0O1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgZGF0ZTogZHRmLmZvcm1hdChkYXRlKSxcclxuICAgICAgICAgICAgc2NvcmU6ICh0aW1lIC8gMTAwMCkudG9GaXhlZCgzKSxcclxuICAgICAgICAgICAgYWN0dWFsVGltZTogdGltZSxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuXHJcbn0iLCJpbXBvcnQgU2NvcmVzIGZyb20gXCIuL1Njb3Jlc1wiO1xyXG5pbXBvcnQgKiBhcyBNdXN0YWNoZSBmcm9tIFwibXVzdGFjaGVcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZyaWVuZGx5RmluZ2VycyB7XHJcblxyXG4gICAgcHJpdmF0ZSB0aW1lOiBudW1iZXJcclxuICAgIHByaXZhdGUgc3RhcnRUaW1lOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGluZGV4OiBudW1iZXJcclxuICAgIHByaXZhdGUgdGltZXI6IEhUTUxFbGVtZW50XHJcbiAgICBwcml2YXRlIGludGVydmFsSWQ6IGFueTtcclxuXHJcbiAgICBwcml2YXRlIHNjb3JlczogU2NvcmVzO1xyXG4gICAgcHJpdmF0ZSBsZXR0ZXI6IGFueTtcclxuXHJcbiAgICBwcml2YXRlIGFscGhhYmV0ID0gWydBJywgJ0InLCAnQycsICdEJywgJ0UnLCAnRicsICdHJywgJ0gnLCAnSScsICdKJywgJ0snLCAnTCcsICdNJywgJ04nLCAnTycsICdQJywgJ1EnLCAnUicsICdTJywgJ1QnLCAnVScsICdWJywgJ1cnLCAnWCcsICdZJywgJ1onXTtcclxuICAgIHByaXZhdGUgZW5kVGVtcGxhdGU6IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmluaXQoKTtcclxuICAgICAgICB0aGlzLmVuZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtaWQ9XCJ0cGwtZW5kLXNjcmVlblwiXScpLmlubmVySFRNTDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgaW5pdCgpIHtcclxuICAgICAgICBjb25zdCBlbEN1cnJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY3VycmVudC1sZXR0ZXInKTtcclxuICAgICAgICB0aGlzLnNjb3JlcyA9IG5ldyBTY29yZXMoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Njb3JlcycpKTtcclxuICAgICAgICB0aGlzLnNjb3Jlcy5yZW5kZXIoKTtcclxuICAgICAgICB0aGlzLnRpbWVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RpbWVyJyk7XHJcbiAgICAgICAgdGhpcy5sZXR0ZXIgPSBlbEN1cnJlbnQ7XHJcbiAgICAgICAgdGhpcy50aW1lci5jbGljaygpO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZXY6IEtleWJvYXJkRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgbGV0IGtleVByZXNzZWQgPSBldi5rZXkudG9VcHBlckNhc2UoKTtcclxuXHJcbiAgICAgICAgICAgIGlmKGtleVByZXNzZWQgPT09ICcgJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50aW1lci5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJy0taXMtdmlzaWJsZScpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVFbmRTY3JlZW4oKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzZXQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIHRoaXMuc3RhcnQoKVxyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0KCkge1xyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbElkKTtcclxuICAgICAgICB0aGlzLmxldHRlci5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJy0taXMtd3JvbmcnKVxyXG4gICAgICAgIHRoaXMuaW5kZXggPSAwO1xyXG4gICAgICAgIHRoaXMubGV0dGVyLmlubmVyVGV4dCA9IHRoaXMuYWxwaGFiZXRbdGhpcy5pbmRleF07XHJcbiAgICAgICAgdGhpcy50aW1lci5pbm5lclRleHQgPSAnMC4wMCc7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhcnQoKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChldjogS2V5Ym9hcmRFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQga2V5ID0gZXYua2V5LnRvVXBwZXJDYXNlKCk7XHJcbiAgICAgICAgICAgIGlmKGtleSA9PT0gJ0EnICYmIHRoaXMuaW5kZXggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRUaW1lcigpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hZHZhbmNlKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZihrZXkgPT09IHRoaXMuYWxwaGFiZXRbdGhpcy5pbmRleF0pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkdmFuY2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmluZGV4ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZhaWwoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBhZHZhbmNlKCkge1xyXG4gICAgICAgIHRoaXMubGV0dGVyLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnLS1pcy13cm9uZycpXHJcbiAgICAgICAgdGhpcy5pbmRleCsrO1xyXG4gICAgICAgIGxldCBsZXR0ZXIgPSB0aGlzLmFscGhhYmV0W3RoaXMuaW5kZXhdO1xyXG5cclxuICAgICAgICBpZihsZXR0ZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5sZXR0ZXIuaW5uZXJUZXh0ID0gdGhpcy5hbHBoYWJldFt0aGlzLmluZGV4XTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBDb25ncmF0dWxhdGlvbnMsIHlvdSBmaW5pc2hlZFxyXG4gICAgICAgICAgICB0aGlzLmZpbmlzaCgpXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBmYWlsKCkge1xyXG4gICAgICAgIHRoaXMubGV0dGVyLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnLS1pcy13cm9uZycpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXJ0VGltZXIoKSB7XHJcbiAgICAgICAgdGhpcy5zdGFydFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgIGxldCB0aW1lID0gMDtcclxuICAgICAgICB0aGlzLmludGVydmFsSWQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRpbWUgKz0gMTA7XHJcbiAgICAgICAgICAgIHRoaXMudGltZXIuaW5uZXJUZXh0ID0gU3RyaW5nKCh0aW1lIC8gMTAwMCkudG9GaXhlZCgzKSk7XHJcbiAgICAgICAgfSwgMTApXHJcbiAgICB9XHJcblxyXG4gICAgZmluaXNoKCkge1xyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbElkKTtcclxuICAgICAgICBsZXQgYWN0dWFsVGltZSA9IChEYXRlLm5vdygpIC0gdGhpcy5zdGFydFRpbWUpO1xyXG4gICAgICAgIGxldCBzY29yZSA9IFNjb3Jlcy5jcmVhdGVTY29yZShhY3R1YWxUaW1lKTtcclxuICAgICAgICB0aGlzLnNjb3Jlcy5zYXZlU2NvcmUoc2NvcmUpO1xyXG4gICAgICAgIHRoaXMucmVzZXQoKTtcclxuICAgICAgICB0aGlzLnNjb3Jlcy5yZW5kZXIoKTtcclxuICAgICAgICB0aGlzLmRpc3BsYXlFbmRTY3JlZW4oc2NvcmUpO1xyXG4gICAgfVxyXG5cclxuICAgIGRpc3BsYXlFbmRTY3JlZW4oc2NvcmU6IFNjb3JlKSB7XHJcbiAgICAgICAgbGV0IGRpYWxvZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcbiAgICAgICAgZGlhbG9nLmNsYXNzTGlzdC5hZGQoJ2RpYWxvZycpO1xyXG4gICAgICAgIGRpYWxvZy5pbm5lckhUTUwgPSBNdXN0YWNoZS5yZW5kZXIodGhpcy5lbmRUZW1wbGF0ZSwge3RpbWU6IHNjb3JlLnNjb3JlfSlcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRpYWxvZyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlRW5kU2NyZWVuKCkge1xyXG4gICAgICAgIGxldCBkaWFsb2cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGlhbG9nJyk7XHJcbiAgICAgICAgaWYoZGlhbG9nKSB7XHJcbiAgICAgICAgICAgIGRpYWxvZy5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKGRpYWxvZyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufSIsImltcG9ydCBGcmllbmRseUZpbmdlcnMgZnJvbSBcIi4vRnJpZW5kbHlGaW5nZXJzXCI7XHJcblxyXG5pbXBvcnQgJy4vY3NzL21haW4uc2Nzcyc7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xyXG4gICAgbGV0IGdhbWUgPSBuZXcgRnJpZW5kbHlGaW5nZXJzKCk7XHJcbn0pIl0sInNvdXJjZVJvb3QiOiIifQ==