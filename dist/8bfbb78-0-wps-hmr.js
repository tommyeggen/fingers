webpackHotUpdate(0,{15:function(e,t,r){"use strict";r.r(t);var n=r(1),i=Intl.DateTimeFormat,s=function(){function e(e){this.container=e,this.scores=this.getSavedScores(),this.template=document.querySelector('[data-id="tpl-scores"]').innerHTML}return e.prototype.saveScore=function(e){var t;(t=(t=this.getSavedScores()?this.getSavedScores():[]).sort((function(e,t){return e.actualTime>t.actualTime}))).length>3?t[t.length-1]=e:t.push(e),localStorage.setItem("scores",JSON.stringify(t)),this.scores=t},e.prototype.getSavedScores=function(){return JSON.parse(localStorage.getItem("scores"))},e.prototype.render=function(){var e=this.scores;e&&e.length>=1&&e.sort((function(e,t){return e.actualTime>t.actualTime}));var t={scores:e,highScore:this.getHighScore()};this.container.innerHTML=n.render(this.template,t),this.setup()},e.prototype.setup=function(){var e=this;this.container.querySelector("#clear-scores").addEventListener("click",(function(){e.clear()}))},e.prototype.getHighScore=function(){var e=this.scores;return e&&e.length>=1?(e.sort((function(e,t){return e.actualTime>t.actualTime})),e[0]):{}},e.prototype.clear=function(){this.scores=[],localStorage.clear(),this.render()},e.createScore=function(e){var t=new Date,r=new i;return{timestamp:Date.now(),date:r.format(t),score:(e/1e3).toFixed(3),actualTime:e}},e}(),o=function(){function e(){this.alphabet=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],this.init(),this.endTemplate=document.querySelector('[data-id="tpl-end-screen"]').innerHTML}return e.prototype.init=function(){var e=this,t=document.querySelector("#current-letter");this.scores=new s(document.querySelector("#scores")),this.scores.render(),this.timer=document.querySelector("#timer"),this.letter=t,this.timer.click(),document.addEventListener("keydown",(function(t){" "===t.key.toUpperCase()&&(e.timer.parentElement.classList.add("--is-visible"),e.removeEndScreen(),e.reset())})),this.start()},e.prototype.reset=function(){clearInterval(this.intervalId),this.letter.parentElement.classList.remove("--is-wrong"),this.index=0,this.letter.innerText=this.alphabet[this.index],this.letter.classList.add("cta"),this.timer.innerText="Start by hitting"},e.prototype.start=function(){var e=this;document.addEventListener("keydown",(function(t){var r=t.key.toUpperCase();"A"===r&&0===e.index?(e.letter.classList.remove("cta"),e.startTimer(),e.advance()):r===e.alphabet[e.index]?e.advance():e.index>0&&e.fail()}))},e.prototype.advance=function(){var e=this;this.letter.parentElement.classList.remove("--is-wrong");var t=1,r=setInterval((function(){t<1.8?t+=.05:(t=1,clearInterval(r)),e.letter.parentElement.style.transform="scale("+t+")"}),5);this.index++,this.alphabet[this.index]?(this.letter.innerText=this.alphabet[this.index],this.letter.parentElement.style.removeProperty("transform")):this.finish()},e.prototype.fail=function(){this.letter.parentElement.classList.add("--is-wrong")},e.prototype.startTimer=function(){var e=this;this.startTime=Date.now();var t=0;this.intervalId=setInterval((function(){t+=10,e.timer.innerText=String((t/1e3).toFixed(2))}),10)},e.prototype.finish=function(){clearInterval(this.intervalId);var e=Date.now()-this.startTime,t=s.createScore(e);this.scores.saveScore(t),this.reset(),this.scores.render(),this.displayEndScreen(t)},e.prototype.displayEndScreen=function(e){var t=this.scores.getHighScore(),r=e.actualTime<=t.actualTime,i={time:e.score,greeting:r?"NEW HIGH SCORE!":e.actualTime-t.actualTime<500?"Ah, so close...":"Not good enough...",isHighScore:r},s=document.createElement("div");s.classList.add("dialog"),s.innerHTML=n.render(this.endTemplate,i),document.body.appendChild(s)},e.prototype.removeEndScreen=function(){var e=document.querySelector(".dialog");e&&e.parentElement.removeChild(e)},e}();r(5);document.addEventListener("DOMContentLoaded",(function(){new o}))}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvU2NvcmVzLnRzIiwid2VicGFjazovLy8uL3NyYy9GcmllbmRseUZpbmdlcnMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbIkRhdGVUaW1lRm9ybWF0IiwiSW50bCIsImNvbnRhaW5lciIsInRoaXMiLCJzY29yZXMiLCJnZXRTYXZlZFNjb3JlcyIsInRlbXBsYXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaW5uZXJIVE1MIiwic2F2ZVNjb3JlIiwic2NvcmUiLCJzb3J0IiwiYSIsImIiLCJhY3R1YWxUaW1lIiwibGVuZ3RoIiwicHVzaCIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwicGFyc2UiLCJnZXRJdGVtIiwicmVuZGVyIiwiY29udGV4dCIsImhpZ2hTY29yZSIsImdldEhpZ2hTY29yZSIsInNldHVwIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsZWFyIiwiY3JlYXRlU2NvcmUiLCJ0aW1lIiwiZGF0ZSIsIkRhdGUiLCJkdGYiLCJ0aW1lc3RhbXAiLCJub3ciLCJmb3JtYXQiLCJ0b0ZpeGVkIiwiYWxwaGFiZXQiLCJpbml0IiwiZW5kVGVtcGxhdGUiLCJlbEN1cnJlbnQiLCJ0aW1lciIsImxldHRlciIsImNsaWNrIiwiZXYiLCJrZXkiLCJ0b1VwcGVyQ2FzZSIsInBhcmVudEVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmVFbmRTY3JlZW4iLCJyZXNldCIsInN0YXJ0IiwiY2xlYXJJbnRlcnZhbCIsImludGVydmFsSWQiLCJyZW1vdmUiLCJpbmRleCIsImlubmVyVGV4dCIsInN0YXJ0VGltZXIiLCJhZHZhbmNlIiwiZmFpbCIsInNjYWxlIiwiaW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsInN0eWxlIiwidHJhbnNmb3JtIiwicmVtb3ZlUHJvcGVydHkiLCJmaW5pc2giLCJzdGFydFRpbWUiLCJTdHJpbmciLCJkaXNwbGF5RW5kU2NyZWVuIiwiaXNIaWdoU2NvcmUiLCJncmVldGluZyIsImRpYWxvZyIsImNyZWF0ZUVsZW1lbnQiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJyZW1vdmVDaGlsZCJdLCJtYXBwaW5ncyI6InNFQUNPQSxFQUFpQkMsS0FBS0QsZSxFQUU3QixXQU9JLFdBQVlFLEdBQ1JDLEtBQUtELFVBQVlBLEVBQ2pCQyxLQUFLQyxPQUFTRCxLQUFLRSxpQkFDbkJGLEtBQUtHLFNBQVdDLFNBQVNDLGNBQWMsMEJBQTBCQyxVQXFGekUsT0FsRkksWUFBQUMsVUFBQSxTQUFVQyxHQUNOLElBQUlQLEdBT0pBLEdBTElBLEVBREFELEtBQUtFLGlCQUNJRixLQUFLRSxpQkFFTCxJQUdHTyxNQUFLLFNBQUNDLEVBQU9DLEdBQ3pCLE9BQU9ELEVBQUVFLFdBQWFELEVBQUVDLGVBR2xCQyxPQUFTLEVBQ2ZaLEVBQU9BLEVBQU9ZLE9BQVMsR0FBS0wsRUFFNUJQLEVBQU9hLEtBQUtOLEdBR2hCTyxhQUFhQyxRQUFRLFNBQVVDLEtBQUtDLFVBQVVqQixJQUM5Q0QsS0FBS0MsT0FBU0EsR0FHbEIsWUFBQUMsZUFBQSxXQUNJLE9BQU9lLEtBQUtFLE1BQU1KLGFBQWFLLFFBQVEsWUFHM0MsWUFBQUMsT0FBQSxXQUNJLElBQUlwQixFQUFjRCxLQUFLQyxPQUVwQkEsR0FBVUEsRUFBT1ksUUFBVSxHQUMxQlosRUFBT1EsTUFBSyxTQUFDQyxFQUFRQyxHQUNqQixPQUFPRCxFQUFFRSxXQUFhRCxFQUFFQyxjQUloQyxJQUFNVSxFQUFVLENBQ1pyQixPQUFRQSxFQUNSc0IsVUFBV3ZCLEtBQUt3QixnQkFHcEJ4QixLQUFLRCxVQUFVTyxVQUFZLFNBQWdCTixLQUFLRyxTQUFVbUIsR0FDMUR0QixLQUFLeUIsU0FHVCxZQUFBQSxNQUFBLHNCQUNxQnpCLEtBQUtELFVBQVVNLGNBQWMsaUJBQ3JDcUIsaUJBQWlCLFNBQVMsV0FDL0IsRUFBS0MsWUFJYixZQUFBSCxhQUFBLFdBQ0ksSUFBSXZCLEVBQWNELEtBQUtDLE9BQ3ZCLE9BQUdBLEdBQVVBLEVBQU9Z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RUFBTyxLQUFNTyxRQUFRLE1BQ3JELEtBR1AsWUFBQStCLE9BQUEsV0FDSWQsY0FBY3JELEtBQUtzRCxZQUNuQixJQUFJMUMsRUFBY21CLEtBQUtHLE1BQVFsQyxLQUFLb0UsVUFDaEM1RCxFQUFRLEVBQU9vQixZQUFZaEIsR0FDL0JaLEtBQUtDLE9BQU9NLFVBQVVDLEdBQ3RCUixLQUFLbUQsUUFDTG5ELEtBQUtDLE9BQU9vQixTQUNackIsS0FBS3NFLGlCQUFpQjlELElBRzFCLFlBQUE4RCxpQkFBQSxTQUFpQjlELEdBRWIsSUFBSWUsRUFBWXZCLEtBQUtDLE9BQU91QixlQUV0QitDLEVBQWMvRCxFQUFNSSxZQUFjVyxFQUFVWCxXQWtCOUNVLEVBQVUsQ0FDVk8sS0FBTXJCLEVBQU1BLE1BQ1pnRSxTQWZHRCxFQUNRLGtCQUdBL0QsRUFBTUksV0FBYVcsRUFBVVgsV0FFOUIsSUFDQyxrQkFFQSxxQkFPWDJELFlBQWFBLEdBRWJFLEVBQVNyRSxTQUFTc0UsY0FBYyxPQUNwQ0QsRUFBT3pCLFVBQVVDLElBQUksVUFDckJ3QixFQUFPbkUsVUFBWSxTQUFnQk4sS0FBS3VDLFlBQWFqQixHQUNyRGxCLFNBQVN1RSxLQUFLQyxZQUFZSCxJQUc5QixZQUFBdkIsZ0JBQUEsV0FDSSxJQUFJdUIsRUFBU3JFLFNBQVNDLGNBQWMsV0FDakNvRSxHQUNDQSxFQUFPMUIsY0FBYzhCLFlBQVlKLElBSTdDLEVBaktBLEcsS0NDQXJFLFNBQVNzQixpQkFBaUIsb0JBQW9CLFdBQy9CLElBQUkiLCJmaWxlIjoiOGJmYmI3OC0wLXdwcy1obXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBNdXN0YWNoZSBmcm9tIFwibXVzdGFjaGVcIjtcclxuaW1wb3J0IERhdGVUaW1lRm9ybWF0ID0gSW50bC5EYXRlVGltZUZvcm1hdDtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNjb3JlcyB7XHJcblxyXG4gICAgcHJpdmF0ZSBzY29yZXM6IFNjb3JlW107XHJcblxyXG4gICAgcHJpdmF0ZSBjb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSB0ZW1wbGF0ZTogc3RyaW5nO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgICAgICB0aGlzLnNjb3JlcyA9IHRoaXMuZ2V0U2F2ZWRTY29yZXMoKTtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtaWQ9XCJ0cGwtc2NvcmVzXCJdJykuaW5uZXJIVE1MO1xyXG4gICAgfVxyXG5cclxuICAgIHNhdmVTY29yZShzY29yZTogU2NvcmUpIHtcclxuICAgICAgICBsZXQgc2NvcmVzOiBhbnk7XHJcbiAgICAgICAgaWYgKHRoaXMuZ2V0U2F2ZWRTY29yZXMoKSkge1xyXG4gICAgICAgICAgICBzY29yZXMgPSB0aGlzLmdldFNhdmVkU2NvcmVzKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2NvcmVzID0gW107XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzY29yZXMgPSBzY29yZXMuc29ydCgoYTphbnksIGI6YW55KSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBhLmFjdHVhbFRpbWUgPiBiLmFjdHVhbFRpbWVcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYoc2NvcmVzLmxlbmd0aCA+IDMpIHtcclxuICAgICAgICAgICAgc2NvcmVzW3Njb3Jlcy5sZW5ndGggLSAxXSA9IHNjb3JlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNjb3Jlcy5wdXNoKHNjb3JlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzY29yZXMnLCBKU09OLnN0cmluZ2lmeShzY29yZXMpKTtcclxuICAgICAgICB0aGlzLnNjb3JlcyA9IHNjb3JlcztcclxuICAgIH1cclxuXHJcbiAgICBnZXRTYXZlZFNjb3JlcygpOiBTY29yZVtdIHtcclxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2NvcmVzJykpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBsZXQgc2NvcmVzOiBhbnkgPSB0aGlzLnNjb3JlcztcclxuXHJcbiAgICAgICAgaWYoc2NvcmVzICYmIHNjb3Jlcy5sZW5ndGggPj0gMSkge1xyXG4gICAgICAgICAgICBzY29yZXMuc29ydCgoYTogYW55LCBiOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhLmFjdHVhbFRpbWUgPiBiLmFjdHVhbFRpbWU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgY29udGV4dCA9IHtcclxuICAgICAgICAgICAgc2NvcmVzOiBzY29yZXMsXHJcbiAgICAgICAgICAgIGhpZ2hTY29yZTogdGhpcy5nZXRIaWdoU2NvcmUoKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuaW5uZXJIVE1MID0gTXVzdGFjaGUucmVuZGVyKHRoaXMudGVtcGxhdGUsIGNvbnRleHQpO1xyXG4gICAgICAgIHRoaXMuc2V0dXAoKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXR1cCgpIHtcclxuICAgICAgICBjb25zdCBjbGVhckJ0biA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNjbGVhci1zY29yZXMnKTtcclxuICAgICAgICBjbGVhckJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jbGVhcigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEhpZ2hTY29yZSgpOiBTY29yZSB7XHJcbiAgICAgICAgbGV0IHNjb3JlczogYW55ID0gdGhpcy5zY29yZXM7XHJcbiAgICAgICAgaWYoc2NvcmVzICYmIHNjb3Jlcy5sZW5ndGggPj0gMSkge1xyXG4gICAgICAgICAgICBzY29yZXMuc29ydCgoYTogYW55LCBiOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhLmFjdHVhbFRpbWUgPiBiLmFjdHVhbFRpbWU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7fTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBzY29yZXNbMF07XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXIoKSB7XHJcbiAgICAgICAgdGhpcy5zY29yZXMgPSBbXTtcclxuICAgICAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcclxuICAgICAgICB0aGlzLnJlbmRlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBjcmVhdGVTY29yZSh0aW1lOiBhbnkpOiBTY29yZSB7XHJcbiAgICAgICAgY29uc3QgZGF0ZTogRGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgY29uc3QgZHRmID0gbmV3IERhdGVUaW1lRm9ybWF0O1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgZGF0ZTogZHRmLmZvcm1hdChkYXRlKSxcclxuICAgICAgICAgICAgc2NvcmU6ICh0aW1lIC8gMTAwMCkudG9GaXhlZCgzKSxcclxuICAgICAgICAgICAgYWN0dWFsVGltZTogdGltZSxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuXHJcbn0iLCJpbXBvcnQgU2NvcmVzIGZyb20gXCIuL1Njb3Jlc1wiO1xyXG5pbXBvcnQgKiBhcyBNdXN0YWNoZSBmcm9tIFwibXVzdGFjaGVcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZyaWVuZGx5RmluZ2VycyB7XHJcblxyXG4gICAgcHJpdmF0ZSB0aW1lOiBudW1iZXJcclxuICAgIHByaXZhdGUgc3RhcnRUaW1lOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGluZGV4OiBudW1iZXJcclxuICAgIHByaXZhdGUgdGltZXI6IEhUTUxFbGVtZW50XHJcbiAgICBwcml2YXRlIGludGVydmFsSWQ6IGFueTtcclxuXHJcbiAgICBwcml2YXRlIHNjb3JlczogU2NvcmVzO1xyXG4gICAgcHJpdmF0ZSBsZXR0ZXI6IGFueTtcclxuXHJcbiAgICBwcml2YXRlIGFscGhhYmV0ID0gWydBJywgJ0InLCAnQycsICdEJywgJ0UnLCAnRicsICdHJywgJ0gnLCAnSScsICdKJywgJ0snLCAnTCcsICdNJywgJ04nLCAnTycsICdQJywgJ1EnLCAnUicsICdTJywgJ1QnLCAnVScsICdWJywgJ1cnLCAnWCcsICdZJywgJ1onXTtcclxuICAgIHByaXZhdGUgZW5kVGVtcGxhdGU6IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmluaXQoKTtcclxuICAgICAgICB0aGlzLmVuZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtaWQ9XCJ0cGwtZW5kLXNjcmVlblwiXScpLmlubmVySFRNTDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgaW5pdCgpIHtcclxuICAgICAgICBjb25zdCBlbEN1cnJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY3VycmVudC1sZXR0ZXInKTtcclxuICAgICAgICB0aGlzLnNjb3JlcyA9IG5ldyBTY29yZXMoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Njb3JlcycpKTtcclxuICAgICAgICB0aGlzLnNjb3Jlcy5yZW5kZXIoKTtcclxuICAgICAgICB0aGlzLnRpbWVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RpbWVyJyk7XHJcbiAgICAgICAgdGhpcy5sZXR0ZXIgPSBlbEN1cnJlbnQ7XHJcbiAgICAgICAgdGhpcy50aW1lci5jbGljaygpO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZXY6IEtleWJvYXJkRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgbGV0IGtleVByZXNzZWQgPSBldi5rZXkudG9VcHBlckNhc2UoKTtcclxuXHJcbiAgICAgICAgICAgIGlmKGtleVByZXNzZWQgPT09ICcgJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50aW1lci5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJy0taXMtdmlzaWJsZScpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVFbmRTY3JlZW4oKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzZXQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIHRoaXMuc3RhcnQoKVxyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0KCkge1xyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbElkKTtcclxuICAgICAgICB0aGlzLmxldHRlci5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJy0taXMtd3JvbmcnKVxyXG4gICAgICAgIHRoaXMuaW5kZXggPSAwO1xyXG4gICAgICAgIHRoaXMubGV0dGVyLmlubmVyVGV4dCA9IHRoaXMuYWxwaGFiZXRbdGhpcy5pbmRleF07XHJcbiAgICAgICAgdGhpcy5sZXR0ZXIuY2xhc3NMaXN0LmFkZCgnY3RhJyk7XHJcbiAgICAgICAgdGhpcy50aW1lci5pbm5lclRleHQgPSAnU3RhcnQgYnkgaGl0dGluZyc7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhcnQoKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChldjogS2V5Ym9hcmRFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQga2V5ID0gZXYua2V5LnRvVXBwZXJDYXNlKCk7XHJcbiAgICAgICAgICAgIGlmKGtleSA9PT0gJ0EnICYmIHRoaXMuaW5kZXggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubGV0dGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2N0YScpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0VGltZXIoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWR2YW5jZSgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYoa2V5ID09PSB0aGlzLmFscGhhYmV0W3RoaXMuaW5kZXhdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZHZhbmNlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5pbmRleCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mYWlsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgYWR2YW5jZSgpIHtcclxuICAgICAgICB0aGlzLmxldHRlci5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJy0taXMtd3JvbmcnKVxyXG4gICAgICAgIGxldCBzY2FsZSA9IDE7XHJcbiAgICAgICAgbGV0IGludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgICAgICBpZihzY2FsZSA8IDEuOCkge1xyXG4gICAgICAgICAgICAgICAgc2NhbGUgPSBzY2FsZSArIC4wNTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNjYWxlID0gMTtcclxuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5sZXR0ZXIucGFyZW50RWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSAnc2NhbGUoJyArIHNjYWxlICsgJyknO1xyXG4gICAgICAgIH0sIDUpXHJcblxyXG4gICAgICAgIHRoaXMuaW5kZXgrKztcclxuICAgICAgICBsZXQgbGV0dGVyID0gdGhpcy5hbHBoYWJldFt0aGlzLmluZGV4XTtcclxuXHJcbiAgICAgICAgaWYobGV0dGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGV0dGVyLmlubmVyVGV4dCA9IHRoaXMuYWxwaGFiZXRbdGhpcy5pbmRleF07XHJcbiAgICAgICAgICAgIHRoaXMubGV0dGVyLnBhcmVudEVsZW1lbnQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3RyYW5zZm9ybScpO1xyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBDb25ncmF0dWxhdGlvbnMsIHlvdSBmaW5pc2hlZFxyXG4gICAgICAgICAgICB0aGlzLmZpbmlzaCgpXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBmYWlsKCkge1xyXG4gICAgICAgIHRoaXMubGV0dGVyLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnLS1pcy13cm9uZycpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXJ0VGltZXIoKSB7XHJcbiAgICAgICAgdGhpcy5zdGFydFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgIGxldCB0aW1lID0gMDtcclxuICAgICAgICB0aGlzLmludGVydmFsSWQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRpbWUgKz0gMTA7XHJcbiAgICAgICAgICAgIHRoaXMudGltZXIuaW5uZXJUZXh0ID0gU3RyaW5nKCh0aW1lIC8gMTAwMCkudG9GaXhlZCgyKSk7XHJcbiAgICAgICAgfSwgMTApXHJcbiAgICB9XHJcblxyXG4gICAgZmluaXNoKCkge1xyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbElkKTtcclxuICAgICAgICBsZXQgYWN0dWFsVGltZSA9IChEYXRlLm5vdygpIC0gdGhpcy5zdGFydFRpbWUpO1xyXG4gICAgICAgIGxldCBzY29yZSA9IFNjb3Jlcy5jcmVhdGVTY29yZShhY3R1YWxUaW1lKTtcclxuICAgICAgICB0aGlzLnNjb3Jlcy5zYXZlU2NvcmUoc2NvcmUpO1xyXG4gICAgICAgIHRoaXMucmVzZXQoKTtcclxuICAgICAgICB0aGlzLnNjb3Jlcy5yZW5kZXIoKTtcclxuICAgICAgICB0aGlzLmRpc3BsYXlFbmRTY3JlZW4oc2NvcmUpO1xyXG4gICAgfVxyXG5cclxuICAgIGRpc3BsYXlFbmRTY3JlZW4oc2NvcmU6IFNjb3JlKSB7XHJcblxyXG4gICAgICAgIGxldCBoaWdoU2NvcmUgPSB0aGlzLnNjb3Jlcy5nZXRIaWdoU2NvcmUoKTtcclxuXHJcbiAgICAgICAgY29uc3QgaXNIaWdoU2NvcmUgPSBzY29yZS5hY3R1YWxUaW1lIDw9IGhpZ2hTY29yZS5hY3R1YWxUaW1lO1xyXG5cclxuXHJcbiAgICAgICAgbGV0IGdldEdyZWV0aW5nID0gKCkgPT4ge1xyXG5cclxuICAgICAgICAgICAgaWYoaXNIaWdoU2NvcmUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnTkVXIEhJR0ggU0NPUkUhJ1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgZGlmZiA9IHNjb3JlLmFjdHVhbFRpbWUgLSBoaWdoU2NvcmUuYWN0dWFsVGltZTtcclxuXHJcbiAgICAgICAgICAgIGlmKGRpZmYgPCA1MDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnQWgsIHNvIGNsb3NlLi4uJ1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdOb3QgZ29vZCBlbm91Z2guLi4nO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgY29udGV4dCA9IHtcclxuICAgICAgICAgICAgdGltZTogc2NvcmUuc2NvcmUsXHJcbiAgICAgICAgICAgIGdyZWV0aW5nOiBnZXRHcmVldGluZygpLFxyXG4gICAgICAgICAgICBpc0hpZ2hTY29yZTogaXNIaWdoU2NvcmUsXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBkaWFsb2cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgICAgIGRpYWxvZy5jbGFzc0xpc3QuYWRkKCdkaWFsb2cnKTtcclxuICAgICAgICBkaWFsb2cuaW5uZXJIVE1MID0gTXVzdGFjaGUucmVuZGVyKHRoaXMuZW5kVGVtcGxhdGUsIGNvbnRleHQpXHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkaWFsb2cpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZUVuZFNjcmVlbigpIHtcclxuICAgICAgICBsZXQgZGlhbG9nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRpYWxvZycpO1xyXG4gICAgICAgIGlmKGRpYWxvZykge1xyXG4gICAgICAgICAgICBkaWFsb2cucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChkaWFsb2cpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgRnJpZW5kbHlGaW5nZXJzIGZyb20gXCIuL0ZyaWVuZGx5RmluZ2Vyc1wiO1xyXG5cclxuaW1wb3J0ICcuL2Nzcy9tYWluLnNjc3MnO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcclxuICAgIGxldCBnYW1lID0gbmV3IEZyaWVuZGx5RmluZ2VycygpO1xyXG59KSJdLCJzb3VyY2VSb290IjoiIn0=